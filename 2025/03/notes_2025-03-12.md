[Home](../../main.md) | [Prev: Day 101](notes_2025-03-11.md) | [Next: Day 103](./notes_2025-03-13.md)

## 📝 Day 102, Wednesday - `notes_2025-03-12.md`

- US223:
    * the complex regex is
    * First Group `(\(|^|\s)`
    * Matches one of these as the starting position:
        * `\(` : Literal opening parenthesis (
        * `^` : Start of the string
        * `\s` : Any whitespace character (space, tab, newline)
        * Literal `?`
        * Matches a literal question mark ?
        * `\s*` Matches zero or more whitespace characters after the ?
        * Second Group `([A-Za-z0-9.-]+|\(|\))`
        * Matches one of these as the content:
        * `[A-Za-z0-9.-]+` : One or more alphanumeric characters, ., or -
        * `\(` : Literal opening parenthesis (
        * `\)` : Literal closing parenthesis )
    * Captures Placeholders
    * Looks for ? symbols preceded by parentheses, whitespace, or the start of the string
    * Useful for identifying template variables like ?param or ?123
    * Flexible Content Matching
    * Allows alphanumeric identifiers (e.g., ?x, ?value-1, ?data.csv)
    * Also matches parentheses (e.g., ?(, ?)), likely for nested syntax

##### sql 

```sql
-- use XMLAGG bc more generic and will error something about buffer size too small
-- A output
SELECT RTRIM(
  XMLAGG(
    XMLELEMENT(e, experiment_id || ', ') 
    ORDER BY experiment_id
  ).GETCLOBVAL(), 
  ', '
) AS experiment_ids
FROM (
SELECT experiment_id
FROM eln_writeup
WHERE 
  DBMS_LOB.INSTR(write_up, '?') > 0
)
;

-- use listagg since the additional REGEX_LIKE will filter even more
-- B output
SELECT LISTAGG(experiment_id, ', ') WITHIN GROUP (ORDER BY experiment_id) AS experiment_ids
FROM (
SELECT experiment_id
FROM eln_writeup
WHERE 
  DBMS_LOB.INSTR(write_up, '?') > 0
  AND REGEXP_LIKE(
    write_up,
    '(\(|^|\s)\?\s*([A-Za-z0-9.-]+|\(|\))', 
    'i'
  )
)
```

- created jupyter notebook, `check_question_mark_writeups.ipyb`
    * calls DTX API for just the writeup given the exp ids from the sql output
    * uses html and css to render the writeup within the cell for easy reading
    * to get difference between two SQL outputs, one with and without the REGEX_LIKE() clause: `grep -F -v -x -f B.txt A.txt | paste -sd, -`
    * need to use XMLAGG()
##### all
```
138606, 138784, 139184, 139229, 139333, 139366, 139547, 139559, 139673, 139686, 139710, 139716, 139971, 140199, 140442, 141394, 141569, 141588, 141851, 142022, 142248, 142622, 142648, 142649, 142709, 142710, 142726, 142745, 142746, 142763, 142861, 142863, 143109, 143325, 143524, 143526, 143545, 143794, 144419, 144441, 144485, 144488, 144562, 144584, 144586, 144704, 144832, 144957, 145150, 145301, 145431, 145489, 145637, 145718, 145790, 145866, 146013, 146623, 146696, 147096, 147516, 147614, 148010, 148351, 148628, 148968, 149057, 149658, 149828, 149864, 149939, 150324, 150441, 150476, 150560, 152548, 152647, 152823, 152856, 152858, 152863, 153056, 153261, 153430, 153633, 153986, 154642, 155407, 155718, 156157, 156573, 156771, 156831, 157251, 157390, 157845, 157858, 157884, 157885, 157887, 158461, 158504, 158648, 158654, 158660, 158804, 159305, 159568, 159826, 160317, 160324, 160325, 160326, 160826, 160944, 160949, 161059, 161352, 161500, 161635, 162024, 162250, 162374, 163275, 163457, 164157, 164445, 164849, 164975, 164978, 165177, 165404, 165617, 165619, 165621, 166428, 167183, 168421, 168750, 168950, 169020, 169928, 169978, 170055, 170058, 170101, 170145, 170341, 171819, 173148, 173425, 173788, 174005, 174093, 174595, 175917, 176069, 176519, 176683, 176775, 178004, 178168, 178236, 178326, 178509, 179448, 179522, 179528, 179540, 180354, 180525, 180636, 180665, 180666, 180682, 180791, 180892, 180936, 181336, 181414, 182372, 182408, 182409, 182421, 182474, 182582, 183092, 183194, 183453, 183464, 183767, 183850, 183975, 184197, 184218, 184431, 184623, 184657, 184850, 184929, 185023, 185050, 185178, 185442, 185851, 185889, 185976, 185983, 186945, 187173, 187241, 187549, 188768, 189414, 189706, 189811, 190835, 190882, 190883, 191075, 191111, 191121, 191125, 191126, 191364, 191434, 191865, 192075, 192138, 192261, 192373, 192526, 192580, 192929, 193090, 193350, 193428, 193540, 193860, 193886, 194049, 194312, 194501, 194671, 194839, 195369, 195459, 195662, 195863, 196064, 196086, 196087, 196329, 196355, 196395, 196423, 196586, 196717, 196852, 197164, 197285, 197305, 197446, 197791, 197915, 198159, 198490, 198707, 199296, 199342, 199477, 199908, 199923, 200121, 200146, 200278, 200546, 200547, 200639, 201388, 201526, 201767, 202113, 202578, 202638, 202678, 202681, 202774, 203497, 203535, 205469, 205473, 205491, 205931, 206064, 206108, 206117, 206118, 206121, 206192, 206441, 206594, 206671, 206798, 206834, 206881, 206890, 207072, 207073, 207075, 207085, 207168, 207174, 207175, 207312, 207321, 207393, 207414, 207509, 207532, 207577, 207610, 207754, 207912, 207920, 208248, 208277, 208459, 208467, 208553, 208674, 208745, 209046, 209098, 209101, 209159, 209188, 209224, 209252, 209272, 209356, 209495, 209566, 209567, 209584, 209605, 209609, 209650, 209670, 209674, 209701, 209910, 209924, 210012, 210275, 210473, 210587, 210847, 211189, 211323, 212460, 213067, 213635, 213638, 214150, 214151, 214512, 214829, 214963, 215385, 215912, 215978, 216848, 217168, 217247, 217359, 218368, 218952, 219167, 219344, 220381, 220449, 220712, 221389, 221409, 222169, 222171, 222311, 222568, 222577, 222641, 223370, 223469, 223941, 224488, 225006, 225047, 225153, 225250, 225428, 225432, 225434, 225700, 225909, 226053, 226247, 226306, 226343, 226407, 226664, 226713, 227022, 227266, 227915, 228197, 228299, 228849, 228941, 229012, 229273, 229274, 229371, 229499, 229828, 230117, 230790, 230797, 230801, 230840, 231094, 231377, 231387, 231391, 231468, 231614, 231827, 231858, 232096, 232209, 232210, 232399, 232587, 232613, 232664, 232996, 233004, 233076, 233101, 233253, 233542, 233543, 233555, 233706, 234064, 234146, 234273, 234279, 234290, 234295, 234615, 234862, 235011, 235176, 235222, 235516, 235612, 235619, 235916, 236148, 236443, 236444, 236445, 236533, 237070, 237135, 237324, 237418, 237943, 238664, 238692, 238710, 238969, 239156, 239180, 239250, 239297, 239328, 239334, 239380, 239469, 239661, 239752, 239769, 240216, 240372, 240666, 240787, 240885, 240888, 241073, 241293, 241304, 241316, 241470, 241520, 242037, 242195, 242203, 242376, 242566, 242757, 243064, 244062, 244353, 244442, 244803, 245036, 245109, 245281, 245406, 245421, 245689, 245923, 245935, 246226, 246235, 246236, 246240, 246321, 246452, 246609, 246896, 247328, 247426, 247462, 247466, 247552, 247596, 247766, 247883, 247920, 247948, 248077, 248188, 248570, 248615, 248663, 248728, 249031, 249562, 249646, 249648, 249667, 249682, 249683, 249983, 250074, 250111, 250427, 250757, 251509, 251519, 251603, 251915, 251916, 251917, 251918, 251919, 251920, 252200, 252260, 252426, 252435, 252681, 252772, 252950, 253050, 253068, 253070, 253083, 253253, 253267, 253374, 253421, 253567, 253945, 254023, 254040, 254282, 254355, 254643, 254692, 254849, 255133, 255230, 255428, 255995, 256068, 256108, 256109, 256116, 256200, 256275, 256350, 256380, 256451, 256511, 256522, 256663, 256665, 256685, 256872, 256875, 256948, 257084, 257159, 257177, 257344, 257443, 257540, 257564, 257903, 257974, 258356, 258523, 258664, 258794, 259087, 259383, 259417, 259421, 259422, 259463, 259668, 260163, 260172, 260178, 260245, 260288, 260345, 260500, 260516, 260570, 260667, 261177, 261289, 261317, 261401, 261613, 261819, 261887, 261968, 261991, 262058, 262117, 262732, 262912, 263216, 263319, 263405, 263621, 263836, 264030, 264979, 265046, 265048, 265050, 265162, 265296, 265488, 265489, 265743, 265784, 265928, 266135, 266388, 266494, 266559, 266666, 267059, 267076, 267088, 267101, 267198, 267203, 267217, 267342, 267383, 267397, 
```

##### preparation command
```bash
# need to do this since grep only works with CR separated exp ids
tr ',' '\n' < A.txt > A_lines.txt
tr ',' '\n' < B.txt > B_lines.txt
grep -Fvxf B_lines.txt A_lines.txt
```

##### output diff
```
138784,
139184,
139229,
139333,
139366,
139547,
139559,
139673,
139686,
139710,
139716,
139971,
140199,
141394,
141569,
141588,
141851,
142022,
142248,
142622,
142648,
142649,
142709,
142710,
142726,
142745,
142746,
142763,
142861,
142863,
143109,
143325,
143524,
143794,
144419,
144441,
144485,
144488,
144562,
144584,
144586,
144704,
144832,
144957,
145150,
145431,
145489,
145637,
145718,
145790,
145866,
146013,
147516,
147614,
148010,
148351,
148628,
148968,
149057,
149658,
149828,
149939,
150441,
150476,
150560,
152548,
152647,
152856,
152858,
152863,
153261,
153430,
153633,
153986,
154642,
155407,
155718,
156157,
156771,
156831,
157251,
158461,
158654,
158660,
161500,
162024,
162250,
162374,
163457,
164157,
164445,
164849,
164975,
164978,
165177,
165617,
165619,
165621,
166428,
167183,
168421,
168750,
169020,
169928,
169978,
170055,
170058,
170101,
170341,
171819,
173148,
173425,
173788,
174005,
174093,
174595,
175917,
176519,
178168,
178236,
178509,
179448,
179522,
179528,
179540,
181336,
181414,
182372,
182408,
182409,
182421,
182474,
182582,
183453,
184218,
184431,
184850,
184929,
185023,
185050,
185178,
185442,
185851,
185976,
185983,
186945,
187173,
187241,
187549,
188768,
189414,
189706,
189811,
190835,
191075,
191111,
191121,
191126,
191364,
192075,
192138,
192373,
192526,
193090,
193428,
193540,
193860,
193886,
194049,
194312,
194501,
194671,
194839,
195369,
195459,
195662,
195863,
196395,
196717,
196852,
197285,
197305,
197446,
198159,
198707,
199342,
200121,
200278,
200546,
200547,
201388,
202774,
205491,
206192,
206671,
206798,
206834,
206881,
206890,
207072,
207073,
207075,
207174,
207175,
207312,
207321,
207393,
207414,
207509,
207532,
207577,
207610,
208248,
208277,
208459,
208467,
208553,
208674,
208745,
209046,
209098,
209101,
209159,
209188,
209224,
209252,
209272,
209356,
209495,
209566,
209567,
209584,
209605,
209609,
209650,
209670,
209674,
209701,
209910,
209924,
210012,
210587,
211189,
211323,
212460,
213067,
213635,
213638,
214150,
214151,
214512,
214829,
214963,
215385,
215912,
215978,
217359,
218368,
218952,
219167,
219344,
220449,
220712,
221389,
221409,
222169,
222171,
222311,
222568,
222577,
222641,
223370,
223469,
223941,
224488,
225006,
225047,
225153,
225250,
225428,
225432,
225909,
226664,
226713,
227266,
227915,
228197,
228299,
228849,
228941,
229012,
229273,
229274,
229499,
229828,
230790,
230801,
231377,
231387,
231391,
232096,
232209,
232210,
232613,
232664,
233076,
233253,
233542,
233543,
233555,
234146,
234273,
234279,
234290,
234295,
234615,
235222,
235516,
235612,
235619,
236443,
236444,
236445,
237070,
237135,
237324,
237418,
237943,
238664,
238692,
238710,
238969,
239156,
239180,
239250,
239328,
239334,
239469,
239661,
239752,
239769,
240216,
240372,
241073,
241293,
241304,
241316,
241470,
241520,
242037,
242195,
242203,
242376,
242566,
244062,
244353,
244442,
244803,
245036,
245109,
245281,
245406,
245421,
245689,
245923,
246226,
246235,
246236,
246240,
246321,
246452,
246896,
247328,
247462,
247466,
247552,
247596,
247766,
247883,
247920,
248077,
248188,
248570,
248615,
248663,
248728,
249031,
249562,
249646,
249648,
249667,
249682,
249683,
249983,
250074,
250111,
250427,
250757,
251509,
251603,
252200,
252260,
252426,
252435,
252681,
252950,
253068,
253070,
253083,
253253,
253267,
253421,
253567,
253945,
254040,
254355,
254643,
254692,
254849,
255230,
255428,
255995,
256108,
256109,
256116,
256200,
256275,
256350,
256380,
256663,
256665,
256685,
256872,
257159,
257344,
257540,
257564,
257903,
257974,
258523,
258664,
258794,
260163,
260172,
260245,
260288,
260500,
261177,
261289,
261317,
261613,
261887,
261968,
261991,
262117,
262732,
262912,
263216,
263319,
263405,
263621,
263836,
264030,
264979,
265046,
265048,
265050,
265162,
265296,
265488,
265489,
265743,
265784,
266135,
266494,
266559,
266666,
267076,
267101,
267383
```
- updated jupyter notebook to run the api calls for the set difference of exp ids for visual confirmation
    * git pushed the jupyter notebook to azure repo
