[Home](../../main.md) | [Prev: Day 210](notes_2025-08-13.md) | [Next: Day 212](./notes_2025-08-15.md)

## üìù Day 211, Thursday - `notes_2025-08-14.md`

### US348
- Create a tool to transform user Mass-Spec data to a standardized analysis format
    * need to think about where the docker container should mount the volume since this volume would need to be accessible to the client
    * at the moment it is accesible on PreludeX01 and X02 server
    * may need to mount a shared drive if possible; so that other computers can connect to it using IP
    * able to create first prototype without exposing core code to client facing notebook; however the results are speculative since the excel file seemed to have inconsistent calculations as mentioned in prior post
    * updated docker command to listen to all network interfaces not just localhost; include the `NotebookApp.ip` flag
    * from X02 server was able to access jupyterlabs from X01 server (172.16.244.233:8888)
    * run powershell as admin on windows 11 server
    * allowed firewall rules: `New-NetFirewallRule -DisplayName "Allow Jupyter on port 8888" -Direction Inbound -Protocol TCP -LocalPort 8888 -Action Allow`
    * `ipconfig` to get accurate ip address, not from ivanti
    * running `netstat -ano | findstr :8888` showed: `TCP 0.0.0.0:8888 0.0.0.0:0 LISTENING 21672`


```powershell
docker run -d -p 8888:8888 `
  -v "C:\Users\Disco-lx\Documents:/home/jovyan/work" `
  jupyter/base-notebook bash -c "pip install pandas xlsxwriter ipywidgets && start-notebook.sh --NotebookApp.notebook_dir=/home/jovyan/work/notebooks --NotebookApp.token='' --NotebookApp.ip=0.0.0.0"
```



### US275
- UAT testing BioChem-PheraStar Experiments with TetraFLA [Closed]
    * meeting with TS on issue about empty array handling; so far no real tangible progress; simply words

### US277
- Assist TS tech support in diagnosing inject dotmatics into mosaic pipeline [Closed]
    * during meeting pointed out that most recent file executed on 29 Jul 2025
    * miraculously the batch_mw is showing up in the json files now `1012824.json`
    * in real-time changed stoichiometry of compound, also created new compound and triggered the pipelines, it took 15 mins due to change in polling for UAT/DEV
    * completed but showed the error below
    * issue was the UAT secret was recently changed for mosaic; needed to update the secret in the shared settings on UAT

```
Task input dictionary keys: dict_keys(['rest_user', 'rest_base_url', 'input_file_pointer', 'rest_password_secret_name', 'mosaic_substance_type_name'])
Processing IDS file: 1012825.json
Pipeline parameter rest_base_url: https://prelude-test.mosaic-cloud.com
Pipeline parameter rest_user: mosaicapiuser
Pipeline parameter mosaic_substance_type_name: Small Molecule
Mosaic API object instance created!
Batch idx: 0, formatted_id: PRT1012825-001
Using Mosaic API endpoint: https://prelude-test.mosaic-cloud.com/api/inventory/Substances/Lookup
Response Mosaic API endpoint: https://prelude-test.mosaic-cloud.com/api/inventory/Substances/Lookup?expand=substances, response code: 401
Error message from Mosaic API: b'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">\r\n<html xmlns="http://www.w3.org/1999/xhtml">\r\n<head>\r\n<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>\r\n<title>401 - Unauthorized: Access is denied due to invalid credentials.</title>\r\n<style type="text/css">\r\n<!--\r\nbody{margin:0;font-size:.7em;font-family:Verdana, Arial, Helvetica, sans-serif;background:#EEEEEE;}\r\nfieldset{padding:0 15px 10px 15px;} \r\nh1{font-size:2.4em;margin:0;color:#FFF;}\r\nh2{font-size:1.7em;margin:0;color:#CC0000;} \r\nh3{font-size:1.2em;margin:10px 0 0 0;color:#000000;} \r\n#header{width:96%;margin:0 0 0 0;padding:6px 2% 6px 2%;font-family:"trebuchet MS", Verdana, sans-serif;color:#FFF;\r\nbackground-color:#555555;}\r\n#content{margin:0 0 0 2%;position:relative;}\r\n.content-container{background:#FFF;width:96%;margin-top:8px;padding:10px;position:relative;}\r\n-->\r\n</style>\r\n</head>\r\n<body>\r\n<div id="header"><h1>Server Error</h1></div>\r\n<div id="content">\r\n <div class="content-container"><fieldset>\r\n  <h2>401 - Unauthorized: Access is denied due to invalid credentials.</h2>\r\n  <h3>You do not have permission to view this directory or page using the credentials that you supplied.</h3>\r\n </fieldset></div>\r\n</div>\r\n</body>\r\n</html>\r\n', 401 Unauthorized
No substance_id found, skipping batch!
```

### US351
- Feasibility for design of multiple payload-linkers per ADC

>question is, how does the user want the information stored? probably can add new inputs and affiliate the data in sql tables, but end of day, how do they want to view it? the added inputs will 'clutter' the UI, but there is no real way to edit the UI since we do no have access to the underlying code, only can work with configs and small changes. so a new column created in UI is most probably not possible unless DTX creates an SOW to do so.

>if a few new inputs are all that are needed something similar to #189 can be achieved, please read the notes:
[https://dev.azure.com/preludetx/PreludeTx_Dotmatics_2024/_workitems/edit/189#5257964](https://dev.azure.com/preludetx/PreludeTx_Dotmatics_2024/_workitems/edit/189#5257964)

---


- if a new payload needs to be added, can't they just simply use this?
    * screenshot of adding chemical or sequence, as well as adding payloads in dropdown menu for the ADC
![image.png](https://dev.azure.com/preludetx/6ef828c6-634c-4fde-b679-0454d9d6a45f/_apis/wit/attachments/aa54404e-a4b0-496b-a62e-8149966a42e0?fileName=image.png) 

from docs:
>allows the current attributes of the Complex to be edited, or further sequences, monomers or chemicals added to the complex.

---

- possibly able to add a `.csv` file with all of the nth properties/attributes of the complex outlined in the file and upload as a `Document` within that batch, that way it will live with the ADC batch

- Registering multiple Complexes from a spreadsheet: might be applicable or not, upload a csv file with headers: `Complex, Compound, Stoichiometry, Compound, Stoichiometry Crosslink`


### US352
- New ADC Project planning
    * during meeting what I gathered was the ask is to:
    prevent un-authorised users from seeing the CALR data in bioregister
    * initial idea was to use validation sql to prevent certain users from seeing the CAL-R data in bioregister browser project, however after initial investigation, it doesn't seem like it would work because the validation sql is only available for labels (buttons) and not for tables
    * investigating how to limit views or hide tables using validation sql
    * part of URL in Ternary_data project download excel export button: `quick.jsp?search=-PRIMARY-&field=1241,EXPERIMENT_ID&currentProjectID=89000&viewType=59&viewID=100440&viewName=Pivot_Ternary_Data&savelevel=project&level=project&action=runDirect&vColours=Y`
    * maybe a lead, can limit ids based on masks? `-USER-`: [https://documentation.dotmatics.com/br/6.2/how-to-guides/how-to-enable-editable-tables](https://documentation.dotmatics.com/br/6.2/how-to-guides/how-to-enable-editable-tables)

```
sql to restrict ids:
(e.g. select 'OK' from restriction_table where id='-PRIMARY-'
and restricted='no')
should return anything for allowed entries,
return nothing/null for restricted
```
