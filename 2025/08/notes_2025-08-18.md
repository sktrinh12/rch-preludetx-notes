[Home](../../main.md) | [Prev: Day 212](notes_2025-08-15.md) | [Next: Day 214](./notes_2025-08-19.md)

## üìù Day 213, Monday - `notes_2025-08-18.md`


### US341
- develop script to ingest tecan file and upload using mosaic api
    * hypothesis was, if a pipeline has an output file (`context.write_file()`); it cannot be piped to another pipeline
        * Tecan Raw to IDS can be piped to Post Tecan IDS to Mosaic because the first pipeline does not have a output file
    * However, when the first pipeline has a output file, i.e. writes `TMP` txt file to save the barcodes; it cannot be piped to a different pipeline
    * therefore, the only solution is to create a multi-step pipeline that does the barcode validation and push to mosaic in the same pipeline
    * however confirmed that Tecan Raw to IDS does indeed have an output step, it outputs `0.json` to the TDS, so not sure why couldn't run validate barcodes and post ids to mosaic in piped mode (linked)
    * when set trigger in post ids to mosaic pipeline to Tecan Raw to IDS pipeline, it worked fine
    * for the multi-step pipeline, removed the `get_file_name_from_file()` function since it relies on `fileKey` and produced, `Error: 'fileKey'`.
        * also removed `file_name` in sql query since impossible to get the filename from a list of barcodes; the `LIMIT 1` will ensure only one parent_uuid is extracted
    * the `.output` of the first pipeline (of multi-step pipeline) doesn't look the same as if it is was the `input_file` of a single pipeline
    * found `copy_pipeline_between_org.py` from TS hub website; copied code in preparation of moving post ids to mosaic pipeline from UAT to PROD
    * this may be due to a recent release change, if memory serves me right last week the release version was `Release: v4.3.0`, however today the version is: `Release: v4.3.1`; so perhaps a bug was introduced or this logic was intentional

### US355
- investigate tetrascience pipeline issue Envision and Licor RAW to IDS to Dotmatics
    * during meeting confirmed another clue as to why the the pipeline doesn't complete:
        * double quotes used for all string columns in working `.csv` file
        * each solvent well like B12/C12, etc has two existing final columns (Total Vol Disp & DMSO %) which exist
        * the None wells: B22/C22, etc don't have these two final columns in the current problem `.csv` file, but the working `.csv` file from previous exp id `275733_02` does have it
    * Issue: cannot find the original tecan file on sharepoint to confirm, need to ask Amy but not available
    * Later Amy got back saying it was a simulation and no longer necessary
    * Requested original Tecan file from user and found the file showed an error that no compound was dispensed in the well because the dispense volume was below the minimum volume for the instrument.  Therefore no compound was present in the Tecan file loaded to TDP and the compound series would not map properly to the plate layout. The software showed a little yellow warning symbol in the well; upon hover can see this minimum volume error
    * Closing the file as scientist mentioned that it does not need to be loaded to Dotmatics any longer. 
