[Home](../../main.md) | [Prev: Day 228](notes_2025-09-09.md) | [Next: Day 230](./notes_2025-09-11.md)

## üìù Day 229, Wednesday - `notes_2025-09-10.md`

### US363
- Modify BioRegister to accommodate dual-payload linkers
    * further refine the sql query to get payload to target mapping
    * set constraint list below from sql: `select PROJECT_NAME from C$PINPOINT.REG_PROJECTS
where project_name <> 'none' and creation_date IS NOT NULL`


```groovy
[
"New Targets",
"Nucleosides",
"CDK2/4/6",
"KAT6A",
"CDK4-6",
"BCL2",
"PolQ",
"KAT6A - Deg",
"intermediate",
"BCL-XL",
"Menin-MLL",
"PI3KŒ±",
"JAK2-Degrader",
"NSD3",
"PI3Ka-Degrader",
"JAK2",
"CDK payload-linker",
"CDK9 Degrader",
"anti-PSMA/SMARCA DAC",
"SMARCA dual",
"CALR",
"SMARCA payload-linker",
"STAG1",
"CDK9 - Next Gen",
"RAS Degraders"
]
```

- the current implementation of payload string type list is from `dictionaries` table which is manual, and not as programmatic
    * couldn't figure out how to just use existing DS due to the `ID` field that seemed to be required; thus created two new DS: (1) `ADC_PAYLOAD_LIST` and (2) `ADC_TARGET_LIST` with an `ID` field
    * this seems to be the only viable option based on reading of documentation and capability of bioregister within the ADC List entity
    * ideally a web-app would be better to offer customisability; however limited in time and resources and perhaps practicality
        * if user requires `n` number of payloads and targets, would need `n*2` more input boxes
    * this method requires user to select the target project every time, however it will auto-populate

---

- also looked into adding custom calculation for the ADC Batch entity (it lives in different space by batch id), which was only possible with Batch (`ProteinSample`) and not `Complex` entity; otherwise the `complex.Payload` attribute would not work
    * basic idea was to use the `Calculation` section of the entity, which would run a basic mapping like below:
    * the results map properly in the ADC Batch list section, but not sure whether the client wants to see it in ADC list or is the batch list fine?
    * also to note this method requires manual up-keeping of the mapping function `payloadMap`

```java
if (complex != null) {
    def payloadMap = [
        "PRT1011907": "SMARCA dual",
        "PRT1003404": "SMARCA2",
        "PRT1010300": "CDK9 - Next Gen",
        "PRT1012241": "SMARCA dual",
        "PRT1009753": "SMARCA2",
        "PRT1009761": "SMARCA2",
        "PRT1010344": "SMARCA2",
        "PRT1011307": "CDK9 Degrader",
        "PRT1012073": "RAS Degraders",
        "PRT1012244": "KAT6A - Deg",
        "PRT1003174": "CDK4-6",
        "PRT1009617": "SMARCA payload-linker",
        "PRT1012823": "JAK2-Degrader"
    ]
    return payloadMap[complex.Payload] ?: "Unknown Project"
}
```

```sql
-- unique payloads that are relevant
select
distinct 
to_number(substr(payload, 4, 8)) as id,
payload
from ds3_userdata.adc_reg_info 
where payload is not null 
and SUBSTR(payload, 1, 3) = 'PRT'


-- target project DS:
select distinct 
to_number(substr(formatted_id, 4, 8)) as id,
formatted_id as payload,
project_name
from reg_display_vw
```
