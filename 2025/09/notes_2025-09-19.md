[Home](../../main.md) | [Prev: Day 235](notes_2025-09-18.md) | [Next: Day 237](./notes_2025-09-22.md)

## üìù Day 236, Friday - `notes_2025-09-19.md`

### Research on ChromaDB vector database and agent/llm model
- updated the three `.py` files to scrape azure devops kanban board data; clean and prepare data; and finally upload to `chromadb` vector database
    * `scrape_az_workitems.py`
    * `clean_workitems.py`
    * `upload_chromadb.py`
    * `llm_svc.py` - this is a fastapi simple app that will offer post request to provide a nice response


### US375
- Change salt forms and stoichiometry
    * Need to associate salt forms with each PRT batch and the listed stoichiometry on PROD
    * update sql needs to be ran in order for irrational numbers to be assigned instead of the numbers listed in drop-down menu
    * either send DTX support ticket to do this or run a sql trigger; this was done similar to #137 
    * converted excel table paste into markdown table

| Orig_BAT_ID       | Sample_ID          | New_BAT_ID       | New_Sample_ID       | Date       | Purity | Form  | Color     | Reference      | EXT ID | User | Amount  | Barcode  | Supplier reference | Compound ratio | Salt    | Stoich | Assay# | Plate# |
|------------------|------------------|----------------|-------------------|-----------|--------|-------|-----------|----------------|--------|------|--------|----------|------------------|----------------|--------|-------|--------|--------|
| PRT1011950-007   | PRT1011950-007   | PRT1013702-001 | PRT1013702-001-001 | 7/3/2025  | 99.3   | solid | off-white |                | KYH005-13 | pwen | 3900mg | PC10042  | PWE013-71-1       | 1              | Formate | 0.28  |        |        |
| PRT1011950-008   | PRT1011950-008   | PRT1013702-002 | PRT1013702-002-001 | 7/3/2025  | 99.3   | solid | off-white |                | KYH005-33 | pwen | 1330mg | PC10043  | PWE013-72-1       | 1              | Formate | 0.3   |        |        |
| PRT1011950-009   | PRT1011950-009   | PRT1013702-003 | PRT1013702-003-001 | 8/4/2025  | 99.3   | solid | off-white |                | KYH005-78 | pwen | 1480mg | PC10358  | PWE014-20-1       | 1              |         |       |        |        |
| PRT1013044-004   | PRT1013044-004-001 | PRT1013704-001 | PRT1013704-001-001 | 7/29/2025 | 98.6   | solid | off-white |                | RXI-08-060-2 | pwen | 105mg  | PC10384  | PWE015-59-1       | 1              | Formate | 0.15  |        |        |
| PRT1013044-005   | PRT1013044-005-001 | PRT1013704-002 | PRT1013704-002-001 | 7/29/2025 | 98.8   | solid | off-white |                | RXI-08-064  | pwen | 50mg   | PC10328  | PWE015-66-2       | 1              | Formate | 0.12  |        |        |
| PRT1013044-005   | PRT1013044-005-002 | PRT1013704-002 | PRT1013704-002-002 | 7/29/2025 | 98.8   | solid | off-white |                | RXI-08-064  | pwen | 675mg  | PC10321  | PWE015-66-1       | 1              | Formate | 0.12  |        |        |
| PRT1013041-003   | PRT1013041-003-001 | PRT1013705-001 | PRT1013705-001-001 | 7/30/2025 | 98.7   | solid | off-white |                | YMY-01-016  | pwen | 9.1mg  | PC10335  | PWE015-70-2       | 1              | Formate | 0.28  |        |        |
| PRT1013041-003   | PRT1013041-003-002 | PRT1013705-001 | PRT1013705-001-002 | 7/30/2025 | 98.7   | solid | off-white |                | YMY-01-016  | pwen | 230mg  | PC10323  | PWE015-70-1       | 1              | Formate | 0.28  |        |        |
| PRT1013075-003   | PRT1013075-003-002 | PRT1013706-001 | PRT1013706-001-001 | 8/12/2025 | 98.9   | solid | off-white |                | YMY-01-032  | pwen | 10.5mg | PC10340  | PWE015-90-2       | 1              | Formate | 0.14  |        |        |
| PRT1013075-003   | PRT1013075-003-001 | PRT1013706-001 | PRT1013706-001-002 | 8/12/2025 | 98.9   | solid | off-white |                | YMY-01-032  | pwen | 332mg  | PC10331  | PWE015-90-1       | 1              | Formate | 0.14  |        |        |


#### sql to check backend data for comparison

```sql

select 
--rb.reg_id, 
--rb.batch_id, 
rb.formatted_batch_id, 
rb.creation_date, 
rs.purity,
rs.form,
rb.appearance,
rb.ext_id,
rb.user_name,
rs.amount || rs.units as AMOUNT,
rs.barcode,
rb.supplier_ref,
rs.supplier,
rc.stoich as compound_ratio,
rd.formatted_id,
--rb.batch_number, 
rb.project_id, 
rb.comments, 
rb.labbook_id,
rb.page_id,
rb.structure_id,
rb.project_code
--rc.id,
--rc.batch_id as rc_batch_id,
--rc.component_reg_id,
--rc.percentage
 from c$PINPOINT.REG_BATCHES RB 
LEFT JOIN c$PINPOINT.REG_COMPONENTS RC 
ON RB.BATCH_ID = RC.BATCH_ID 
LEFT JOIN c$PINPOINT.REG_SAMPLES RS
ON RB.BATCH_ID = RS.BATCH_ID
LEFT JOIN c$PINPOINT.REG_DATA RD
ON rc.component_reg_id = rd.reg_id
where RB.FORMATTED_BATCH_ID = 'PRT1013706-001'
```

#### Discrepancies
- `PRT1013702-001`:
    * in db supplier_ref shows up as `N1535-14-1` but in table it shows `PWE013-71-1`

- `PRT1013702-002`:
    * in db supplier_ref shows up as `N1535-14-1` but in table it shows `PWE013-72-1`; also amount shows `3900mg` but table shows, `1330mg`

- `PRT1013702-003`:
    * table supplier_ref shows `PWE014-20-1	` but db shows `N1535-14-1`, there is a salt form attached in db (formate, 0.5 stoichiometry), but not in the table 

- `PRT1013704-001`:
    * table supplier_ref shows `PWE015-59-1` but db shows `N1535-15-1`

- `PRT1013704-002`:
    * table supplier_ref shows `PWE015-66-2` but db shows: `N1535-15-1`

- `PRT1013705-001-001`:
    * table shows amount of 9.1mg vs db shows, 239.1mg
    * table supplier_ref shows`PWE015-70-2` vs in db, `N1535-16-1`

- `PRT1013705-001-002`:
    * table shows amount of 230mg vs db shows, 239.1mg
    * table shows supplier_ref of PWE015-70-1 vs db shows, N1535-16-1

- `PRT1013706-001-001`:
    * table shows supplier_ref of PWE015-90-2 vs db shows, N1535-17-1
    * old sample_id shows 002, however new sample_id shows 001

- `PRT1013706-001-002`:
    * table shows supplier_ref of PWE015-90-1 vs db shows, N1535-17-1
    * old sample_id shows 001, however new sample_id shows 002
